<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>HashMap解析</title>
    <url>/2020/09/05/HashMap%E8%A7%A3%E6%9E%90/</url>
    <content><![CDATA[<p>Java 中的 HashMap 是编程中较为常用的数据结构之一，与其对比的还有 HashTable、ConcurrentHashMap，万变不离其宗，只有掌握了其设计思想，才能从本质上理解它们的用法。</p>
<a id="more"></a>

<h4 id="1-数组的优势"><a href="#1-数组的优势" class="headerlink" title="1.数组的优势"></a>1.数组的优势</h4><img src="/2020/09/05/HashMap%E8%A7%A3%E6%9E%90/image-20200905105525253.png" alt="image-20200905105525253" style="zoom:67%;">

<center><b>图1.1 整型数组</b></center>
上图是一个含有 8 个元素多的整型数组，数组下标从 0 到 7，基于数组下标的随机访问和赋值数组元素的时间复杂度都是 $O(1)$，无论数组有多大（在内存充足的情况下），这是数组的优势之一。

<p>数组可以通过下标来获取数组中指的元素，但是这个下标只能试正整数，并且从 0 开始。如果想通过一个浮点数、字符串、对象作为 <em>key</em> 呢？即 <code>key - value</code>，这个时候就难以满足这个需求了。</p>
<p>数组也可以看作是一种特殊的键值对，<em>key</em> 是数组的下标，<em>value</em> 是数组的下标对应的元素值，因此要求 <em>KV</em> 数据结构里的 <em>key</em> 是一个对象，而不仅仅只能是数组中的一个下标。<em>KV</em>  数据结构需要满足一下特性：</p>
<ul>
<li>访问任意 <em>key</em> 对应的值的复杂度都是 $O(1)$；</li>
<li><em>key</em> 支持 <strong>整型</strong>、<strong>浮点</strong>、<strong>字符串</strong>、<strong>对象</strong>等任何类型的数据；</li>
</ul>
<h4 id="2-Hash函数"><a href="#2-Hash函数" class="headerlink" title="2.Hash函数"></a>2.Hash函数</h4><p>作用：通过哈希算法把任意类型的 <em>key</em> 转换成固定类型、固定长度的散列值，即期望的数组下标（整型）。哈希函数具有以下特点：</p>
<ul>
<li>相同内容经过话哈希算法计算过后输出结果应当一致；</li>
<li>不同内容经过哈希算法计算过后输出结果不同，但会有小概率输出相同值，及哈希碰撞；</li>
</ul>
<p>对象经过哈希计算后输出的 <em>hashCode</em> 值很大，无法作为数组下标，否则会导致数组占用内存过大，因此采用 <em>hashCode</em> 取余的方式，如 Java 中 HashMap 的默认 size 是 16，hashCode 为 $92599395 % 16 = 3$。</p>
<h4 id="3-Hash冲突"><a href="#3-Hash冲突" class="headerlink" title="3.Hash冲突"></a>3.Hash冲突</h4><p>解决方案</p>
<ul>
<li>开放定址法：当发生地址冲突时，按照某种方法继续探测哈希表中的其他存储单元，直到找到空位置为止；</li>
<li>再哈希法 ：当发生冲突时，使用第二个、第三个哈希函数计算地址，直到无冲突时；</li>
<li><strong>链地址法</strong>：将所有关键字为同义词的记录存储在同一线性链表中；</li>
<li>建立一个公共溢出区</li>
</ul>
<h4 id="4-多线程下闭环"><a href="#4-多线程下闭环" class="headerlink" title="4.多线程下闭环"></a>4.多线程下闭环</h4><p>HashMap在<code>JDK1.7</code>版本下，多线程下扩容容器发生闭环，造成这种现象的原因是头插法。</p>
]]></content>
      <categories>
        <category>数据结构</category>
      </categories>
      <tags>
        <tag>Map</tag>
      </tags>
  </entry>
  <entry>
    <title>Liquibase</title>
    <url>/2021/08/01/Liquibase/</url>
    <content><![CDATA[<p>Liquibase helps teams release software faster by bringing DevOps to the database.</p>
<ul>
<li>Get database code into version control: Easily order and track changes through version control. Always know when, where, and how database changes are deployed.</li>
<li>Build quality into your process early: Check database code quality before developers commit, when it’s much cheaper and easier to fix problems.</li>
<li>Work faster with the tools you already use: Collaborate efficiently with tools you already use, enabling true CI/CD for the database.</li>
</ul>
<a id="more"></a>

<h4 id="1-概述"><a href="#1-概述" class="headerlink" title="1.概述"></a>1.概述</h4><p>​        <a href="https://liquibase.org/get-started/quickstart" target="_blank" rel="noopener">Liquibase</a> 是一个用于跟踪，管理和应用数据库变化的开源的数据库重构工具。它将所有数据库的变化(包括结构和数据) 都保存在XML文件中，便于版本控制。</p>
<h4 id="2-特性"><a href="#2-特性" class="headerlink" title="2.特性"></a>2.特性</h4><ul>
<li>不依赖于特定的数据库，目前支持包括Oracle/Sql Server/DB2/MySql/Sybase/PostgreSQL/Caché等12种数据库，这样在数据库的部署和升级环节可帮助应用系统支持多数据库；</li>
<li>提供数据库比较功能，比较结果保存在XML中，基于该XML你可用Liquibase轻松部署或升级数据库；</li>
<li>以XML存储数据库变化，其中以作者和ID唯一标识一个变化（ChangSet），支持数据库变化的合并，因此支持多开发人员同时工作；</li>
<li>在数据库中保存数据库修改历史（DatabaseChangeHistory），在数据库升级时自动跳过已应用的变化（ChangSet）；</li>
<li>提供变化应用的回滚功能，可按时间、数量或标签（tag）回滚已应用的变化。通过这种方式，开发人员可轻易的还原数据库在任何时间点的状态；</li>
<li>可生成数据库修改文档（HTML格式）；</li>
<li>提供数据重构的独立的IDE和Eclipse插件；</li>
</ul>
<h4 id="3-整合SpringBoot"><a href="#3-整合SpringBoot" class="headerlink" title="3.整合SpringBoot"></a>3.整合SpringBoot</h4><h5 id="3-1-依赖"><a href="#3-1-依赖" class="headerlink" title="3.1 依赖"></a>3.1 依赖</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.liquibase<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>liquibase-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="3-2-配置类"><a href="#3-2-配置类" class="headerlink" title="3.2 配置类"></a>3.2 配置类</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LiquibaseConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String changeLogLocation = <span class="string">"classpath:liquibase/db.changelog-master.yaml"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SpringLiquibase <span class="title">liquibase</span><span class="params">(@Qualifier(<span class="string">"masterDataSource"</span>)</span> DataSource dataSource) </span>&#123;</span><br><span class="line">        SpringLiquibase liquibase = <span class="keyword">new</span> SpringLiquibase();</span><br><span class="line">        liquibase.setDataSource(dataSource);</span><br><span class="line">        <span class="comment">//指定changelog的位置，这里使用的一个master文件引用其他文件的方式</span></span><br><span class="line">        liquibase.setChangeLog(changeLogLocation);</span><br><span class="line">        <span class="comment">//liquibase.setContexts("development,test,production");</span></span><br><span class="line">        liquibase.setShouldRun(<span class="keyword">true</span>); <span class="comment">//设置为true才会执行sql</span></span><br><span class="line">        <span class="keyword">return</span> liquibase;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="3-3-db-changelog-master-yml"><a href="#3-3-db-changelog-master-yml" class="headerlink" title="3.3 db.changelog-master.yml"></a>3.3 db.changelog-master.yml</h5><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">databaseChangeLog:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">include:</span></span><br><span class="line">      <span class="attr">file:</span> <span class="string">classpath:liquibase/changelog/0.1.0.release/db.changelog-0.1.0.yaml</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">include:</span></span><br><span class="line">      <span class="attr">file:</span> <span class="string">classpath:liquibase/changelog/0.1.0.release/changelog-0.1.0.yml</span></span><br></pre></td></tr></table></figure>



<h5 id="3-4-db-changelog-0-1-0-yml"><a href="#3-4-db-changelog-0-1-0-yml" class="headerlink" title="3.4 db.changelog-0.1.0.yml"></a>3.4 db.changelog-0.1.0.yml</h5><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">databaseChangeLog:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">changeSet:</span></span><br><span class="line">      <span class="attr">id:</span> <span class="number">20210714</span><span class="number">-113700</span></span><br><span class="line">      <span class="attr">author:</span> <span class="string">luwenyang</span></span><br><span class="line">      <span class="attr">comment:</span> <span class="string">"删除表department"</span></span><br><span class="line">      <span class="attr">changes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">sqlFile:</span></span><br><span class="line">            <span class="attr">encoding:</span> <span class="string">utf8</span></span><br><span class="line">            <span class="attr">path:</span> <span class="string">classpath:liquibase/changelog/0.1.0.release/deteleDepartmentTable.sql</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">changeSet:</span></span><br><span class="line">      <span class="attr">id:</span> <span class="number">20210714</span><span class="number">-183000</span></span><br><span class="line">      <span class="attr">author:</span> <span class="string">luwenyang</span></span><br><span class="line">      <span class="attr">comment:</span> <span class="string">"测试使用sql"</span></span><br><span class="line">      <span class="attr">changes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">sql:</span></span><br><span class="line">            <span class="attr">sql:</span> <span class="string">update</span> <span class="string">business</span> <span class="string">set</span> <span class="string">businessName</span> <span class="string">=</span> <span class="string">'711便利店金融港店'</span> <span class="string">where</span> <span class="string">businessID</span> <span class="string">=</span> <span class="number">1</span> <span class="string">and</span> <span class="string">deleteFlag</span> <span class="string">=</span> <span class="number">0</span><span class="string">;</span></span><br><span class="line">            <span class="attr">rollback:</span> <span class="string">update</span> <span class="string">business</span> <span class="string">set</span> <span class="string">businessName</span> <span class="string">=</span> <span class="string">'金融港711便利店'</span> <span class="string">where</span> <span class="string">businessID</span> <span class="string">=</span> <span class="number">1</span> <span class="string">and</span> <span class="string">deleteFlag</span> <span class="string">=</span> <span class="number">0</span><span class="string">;</span></span><br></pre></td></tr></table></figure>



<h4 id="4-使用"><a href="#4-使用" class="headerlink" title="4.使用"></a>4.使用</h4><h5 id="4-1-changelog"><a href="#4-1-changelog" class="headerlink" title="4.1 changelog"></a>4.1 changelog</h5><p>​        changelog 是 Liquibase 进行版本管理的核心文件，Liquibase依据这个变更日志来审计数据库，并执行任何还没有应用到目标数据库的变更操作。表 <code>databasechangelog</code> 会记录已经执行的 changelog 信息，已经执行的 changelog 不会再次执行。表 <code>databasechangeloglock</code>用来加锁，保证同一时刻下只有一台服务器执行 changelog，避免多台服务器（多副本部署）执行了同一个 changelog 带来的问题。</p>
<p>​        changelog 支持的格式包括：sql、xml、json、yaml 等。</p>
<h6 id="1、xml格式"><a href="#1、xml格式" class="headerlink" title="1、xml格式"></a>1、xml格式</h6><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>  </span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">databaseChangeLog</span>  </span></span><br><span class="line"><span class="tag">        <span class="attr">xmlns</span>=<span class="string">"http://www.liquibase.org/xml/ns/dbchangelog"</span>  </span></span><br><span class="line"><span class="tag">        <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span>  </span></span><br><span class="line"><span class="tag">        <span class="attr">xmlns:ext</span>=<span class="string">"http://www.liquibase.org/xml/ns/dbchangelog-ext"</span>  </span></span><br><span class="line"><span class="tag">        <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd"</span>&gt;</span>  </span><br><span class="line"> </span><br><span class="line">    <span class="comment">&lt;!-- master文件中引用其它需要执行的sql脚本 --&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">include</span> <span class="attr">file</span>=<span class="string">"liquibase/changelog/init-table.xml"</span> <span class="attr">relativeToChangelogFile</span>=<span class="string">"false"</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--配置文件中指定程序运行时读取改文件，管理表 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">changeSet</span> <span class="attr">id</span>=<span class="string">"20210714-113000"</span> <span class="attr">author</span>=<span class="string">"luwenyang"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">comment</span>&gt;</span>新增表department<span class="tag">&lt;/<span class="name">comment</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">createTable</span> <span class="attr">tableName</span>=<span class="string">"department"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">"dID"</span> <span class="attr">type</span>=<span class="string">"int"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">constraints</span> <span class="attr">primaryKey</span>=<span class="string">"true"</span> <span class="attr">nullable</span>=<span class="string">"false"</span>&gt;</span><span class="tag">&lt;/<span class="name">constraints</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">"dName"</span> <span class="attr">type</span>=<span class="string">"varchar(50)"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">constraints</span> <span class="attr">nullable</span>=<span class="string">"false"</span>&gt;</span><span class="tag">&lt;/<span class="name">constraints</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">column</span> <span class="attr">name</span>=<span class="string">"address"</span> <span class="attr">type</span>=<span class="string">"varchar(255)"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">constraints</span> <span class="attr">nullable</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">constraints</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">createTable</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">changeSet</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">changeSet</span> <span class="attr">id</span>=<span class="string">"20210714-182500"</span> <span class="attr">author</span>=<span class="string">"luwenyang"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">comment</span>&gt;</span>删除表tcPageConfig<span class="tag">&lt;/<span class="name">comment</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">sql</span>&gt;</span></span><br><span class="line">            drop table tcPageConfig;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollback</span>&gt;</span></span><br><span class="line">            create table tcPageConfig</span><br><span class="line">            (</span><br><span class="line">            pageId    varchar(32)  not null,</span><br><span class="line">            pageTitle  varchar(128) not null,</span><br><span class="line">            pageConfig text         null,</span><br><span class="line">            groupName  varchar(256) null,</span><br><span class="line">            primary key (pageId)</span><br><span class="line">            ) engine = InnoDB</span><br><span class="line">            default charset = utf8</span><br><span class="line">            row_format = dynamic comment '页面配置表';</span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollback</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">changeSet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">databaseChangeLog</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h6 id="2、yaml格式"><a href="#2、yaml格式" class="headerlink" title="2、yaml格式"></a>2、yaml格式</h6><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">databaseChangeLog:</span>  </span><br><span class="line">  <span class="bullet">-</span>  <span class="attr">changeSet:</span>  </span><br><span class="line">      <span class="attr">id:</span>  <span class="number">1</span>  </span><br><span class="line">      <span class="attr">author:</span>  <span class="string">nvoxland</span>  </span><br><span class="line">      <span class="attr">changes:</span>  </span><br><span class="line">        <span class="bullet">-</span>  <span class="attr">createTable:</span>  </span><br><span class="line">            <span class="attr">tableName:</span>  <span class="string">person</span>  </span><br><span class="line">            <span class="attr">columns:</span>  </span><br><span class="line">              <span class="bullet">-</span>  <span class="attr">column:</span>  </span><br><span class="line">                  <span class="attr">name:</span>  <span class="string">id</span>  </span><br><span class="line">                  <span class="attr">type:</span>  <span class="string">int</span>  </span><br><span class="line">                  <span class="attr">autoIncrement:</span>  <span class="literal">true</span>  </span><br><span class="line">                  <span class="attr">constraints:</span>  </span><br><span class="line">                    <span class="attr">primaryKey:</span>  <span class="literal">true</span>  </span><br><span class="line">                    <span class="attr">nullable:</span>  <span class="literal">false</span>  </span><br><span class="line">              <span class="bullet">-</span>  <span class="attr">column:</span>  </span><br><span class="line">                  <span class="attr">name:</span>  <span class="string">firstname</span>  </span><br><span class="line">                  <span class="attr">type:</span>  <span class="string">varchar(50)</span>  </span><br><span class="line">              <span class="bullet">-</span>  <span class="attr">column:</span>  </span><br><span class="line">                  <span class="attr">name:</span>  <span class="string">lastname</span>  </span><br><span class="line">                  <span class="attr">type:</span>  <span class="string">varchar(50)</span>  </span><br><span class="line">                  <span class="attr">constraints:</span>  </span><br><span class="line">                    <span class="attr">nullable:</span>  <span class="literal">false</span>  </span><br><span class="line">              <span class="bullet">-</span>  <span class="attr">column:</span>  </span><br><span class="line">                  <span class="attr">name:</span>  <span class="string">state</span>  </span><br><span class="line">                  <span class="attr">type:</span>  <span class="string">char(2)</span></span><br></pre></td></tr></table></figure>



<h6 id="3、嵌套元素"><a href="#3、嵌套元素" class="headerlink" title="3、嵌套元素"></a>3、嵌套元素</h6><p>changelog 可用的嵌套元素共5类：</p>
<ul>
<li>preConditions：执行 changelog 的前置条件；</li>
<li>property：用于设置属性的值；</li>
<li>changeSet：执行的变更集；</li>
<li>include：引用其他包含要执行的 changeSet 文件；</li>
<li>context：changSet 上下文；</li>
</ul>
<h4 id="5-拓展"><a href="#5-拓展" class="headerlink" title="5.拓展"></a>5.拓展</h4><p>​        <a href="https://flywaydb.org/documentation/" target="_blank" rel="noopener">Flyway</a> 是一个能对数据库变更进行版本控制的工具。</p>
<p>​        Welcome to <strong>Flyway</strong>, database migrations made easy. <strong><em>Flyway</em></strong> provide 7 basic commands： <a href="https://flywaydb.org/documentation/command/migrate" target="_blank" rel="noopener">Migrate</a>, <a href="https://flywaydb.org/documentation/command/clean" target="_blank" rel="noopener">Clean</a>, <a href="https://flywaydb.org/documentation/command/info" target="_blank" rel="noopener">Info</a>, <a href="https://flywaydb.org/documentation/command/validate" target="_blank" rel="noopener">Validate</a>, <a href="https://flywaydb.org/documentation/command/undo" target="_blank" rel="noopener">Undo</a>, <a href="https://flywaydb.org/documentation/command/baseline" target="_blank" rel="noopener">Baseline</a> and <a href="https://flywaydb.org/documentation/command/repair" target="_blank" rel="noopener">Repair</a>. </p>
<p>​        It has a <a href="https://flywaydb.org/documentation/usage/commandline" target="_blank" rel="noopener">Command-line client</a>. If you are on the JVM, we recommend using the <a href="https://flywaydb.org/documentation/usage/api" target="_blank" rel="noopener">Java API</a> for migrating the database on application startup. Alternatively, you can also use the <a href="https://flywaydb.org/documentation/usage/maven" target="_blank" rel="noopener">Maven plugin</a> or <a href="https://flywaydb.org/documentation/usage/gradle" target="_blank" rel="noopener">Gradle plugin</a>.</p>
<p>​        And if that’s not enough, there are <a href="https://flywaydb.org/documentation/plugins" target="_blank" rel="noopener">plugins</a> available for Spring Boot, Dropwizard, Grails, Play, SBT, Ant, Griffon, Grunt, Ninja and more!</p>
<p><strong>优点</strong>：</p>
<ul>
<li>基本指令，方便数据迁移；</li>
<li>提供基于 Maven Plugin and Gradle Plugin；</li>
<li>there are <a href="https://flywaydb.org/documentation/plugins" target="_blank" rel="noopener">plugins</a> available for Spring Boot,</li>
<li>支持多种数据库：Oracle、SQL Server、DB2、MySQL、PostgreSQL、H2；</li>
</ul>
]]></content>
      <categories>
        <category>后端</category>
        <category>database</category>
      </categories>
      <tags>
        <tag>liquibase</tag>
        <tag>数据库</tag>
      </tags>
  </entry>
  <entry>
    <title>记录第一篇博客搭建的全过程</title>
    <url>/2022/03/15/%E8%AE%B0%E5%BD%95%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E7%9A%84%E5%85%A8%E8%BF%87%E7%A8%8B/</url>
    <content><![CDATA[<p>欢迎来到 Hexo! Hexo是一款快速、简洁且高效的博客框架。<strong>超快速度</strong>：Node.js 所带来的超快生成速度，让上百个页面在几秒内瞬间完成渲染；<strong>支持 Markdown</strong>：Hexo 支持 GitHub Flavored Markdown 的所有功能，甚至可以整合 Octopress 的大多数插件；<strong>一键部署</strong>：只需一条指令即可部署到 GitHub Pages, Heroku 或其他网站。<strong>丰富的插件</strong>：Hexo 拥有强大的插件系统，安装插件可以让 Hexo 支持 Jade, CoffeeScript。</p>
<a id="more"></a>

<h4 id="1-安装环境"><a href="#1-安装环境" class="headerlink" title="1.安装环境"></a>1.安装环境</h4><p>在安装 hexo 前需要准备 node.js 环境，在<code>CMD</code>下使用 node -v 可以查看 node 的版本信息，在node.js官网 <a href="https://nodejs.org/en/" target="_blank" rel="noopener">https://nodejs.org/en/</a> 中选择 LTS 下载安装即可。之后需要安装 cnpm 环境，安装命令为 npm install -g cnpm –registry=<a href="https://registry.npm.taobao.org，使用" target="_blank" rel="noopener">https://registry.npm.taobao.org，使用</a> cnpm -v 命令查看版本，环境搭建完成后就可以开始 hexo 博客的搭建步骤了，如下所示：</p>
<ul>
<li><p>安装 hexo：<code>cnpm install -g hexo-cli</code></p>
</li>
<li><p>创建博客文件夹：如 <code>E:/codecat/blog</code></p>
</li>
<li><p>切换路径：<code>cd E:/codecat/blog</code></p>
</li>
<li><p>初始化 hexo：<code>hexo init</code></p>
</li>
<li><p>启动 hexo 服务：<code>hexo s</code></p>
<ul>
<li>启动后可以在本地的 <code>4000</code> 端口访问查看</li>
</ul>
</li>
<li><p><strong>部署到远端(Github)</strong></p>
<ul>
<li><p>安装插件：<code>cnpm install --save hexo-deployer-git</code></p>
</li>
<li><p>配置 _config.yml 文件，其中 <strong>IAmLuwenyang.github.io.git</strong> 为 Github 创建的 repository 名称</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">'git'</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://github.com/IAmLuwenyang/IAmLuwenyang.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>部署到 Github 中，输入命令：<code>hexo d</code></p>
</li>
</ul>
</li>
</ul>
<h4 id="2-更换hexo主题"><a href="#2-更换hexo主题" class="headerlink" title="2.更换hexo主题"></a>2.更换hexo主题</h4><p>推荐几款主题，喜欢的朋友们可以去对应的Github网址上访问下载。</p>
<ul>
<li><p>butterfly主题，风格如下所示：</p>
<p><img src="/2022/03/15/%E8%AE%B0%E5%BD%95%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E7%9A%84%E5%85%A8%E8%BF%87%E7%A8%8B/image-20200718212926602.png" alt="image-20200718212926602"></p>
<center>图2-1 基于hexo的butterfly风格的博客首页</center>
</li>
<li><p>matery主题，一个基于材料设计和响应式设计而成的全面、美观的Hexo主题，<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank" rel="noopener">https://github.com/blinkfox/hexo-theme-matery</a> ；</p>
<p><img src="/2022/03/15/%E8%AE%B0%E5%BD%95%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E7%9A%84%E5%85%A8%E8%BF%87%E7%A8%8B/image-20200718213026206.png" alt="image-20200718213026206"></p>
<center>图2-2 基于hexo的matery风格的博客首页</center>
</li>
<li><p>yilia主题，一个简洁优雅的hexo主题，<a href="https://github.com/litten/hexo-theme-yilia" target="_blank" rel="noopener">https://github.com/litten/hexo-theme-yilia</a> ;</p>
<p><img src="/2022/03/15/%E8%AE%B0%E5%BD%95%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E7%9A%84%E5%85%A8%E8%BF%87%E7%A8%8B/2020-07-19_025004.png" alt="2020-07-19_025004"></p>
<center>图2-3 基于hexo的yilia风格的博客首页</center>
</li>
<li><p>next主题，<a href="https://github.com/iissnan/hexo-theme-next，个人比较喜欢" target="_blank" rel="noopener">https://github.com/iissnan/hexo-theme-next，个人比较喜欢</a> next 的风格，图2-4是 next 主题的博客首页效果图，下一篇会为大家带来详细的 next 主题样式改造文章！</p>
<p><img src="/2022/03/15/%E8%AE%B0%E5%BD%95%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E7%9A%84%E5%85%A8%E8%BF%87%E7%A8%8B/iamge-20200719015814.png" alt="iamge-20200719015814"></p>
</li>
</ul>
<center>图2-4 基于hexo的next风格的博客首页</center>
下载主题，以matery为例，在命令行输入 `git clone https://github.com/blinkfox/hexo-theme-matery.git themes/matery` 需要修改  _config.yml 中的配置 `theme: matery`，完成后执行如下命令：

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean <span class="comment"># 清除本地静态资源</span></span><br><span class="line">hexo g     <span class="comment"># 重新生成</span></span><br><span class="line">hexo s     <span class="comment"># 启动服务</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 推送到Github</span></span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>

<p>本地访问路径：<a href="http://localhost:4000" target="_blank" rel="noopener">http://localhost:4000</a></p>
<h4 id="3-快速开始"><a href="#3-快速开始" class="headerlink" title="3.快速开始"></a>3.快速开始</h4><p>如何写另一篇博客，需要在命令行输入：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo new &quot;next主题的优化配置&quot;</span><br></pre></td></tr></table></figure>

<p>更多详细信息访问：<a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">https://hexo.io/docs/writing.html</a> 。</p>
<h4 id="4-注意事项"><a href="#4-注意事项" class="headerlink" title="4.注意事项"></a>4.注意事项</h4><p>​        搭建过程中所有的命令行操作都在 Git Bash 中完成，因此需要提前下载安装 Git 环境。</p>
]]></content>
      <categories>
        <category>博客</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo主题next的美化配置</title>
    <url>/2020/07/19/Hexo%E4%B8%BB%E9%A2%98next%E7%9A%84%E7%BE%8E%E5%8C%96%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<p>Hexo的Next主题拥有丰富而简单的配置，结合第三方服务，打造属于您自己的博客。<a href="http://theme-next.iissnan.com/theme-settings.html" target="_blank" rel="noopener">主题配置</a>：NexT 坚持将复杂的细节隐藏，提供尽量少并且简便的设置，保持最大限度的易用性；<a href="http://theme-next.iissnan.com/third-party-services.html" target="_blank" rel="noopener">第三方服务集成</a>：使用 第三方服务 来扩展站点的功能， NexT 支持多种常见第三方服务；<a href="http://theme-next.iissnan.com/tag-plugins.html" target="_blank" rel="noopener">内置标签</a>：除了 Markdown 支持的语法之外，NexT 借助 Hexo 提供的标签特性， 为您提供在书写文档时快速插入带特殊样式的内容；<a href="http://theme-next.iissnan.com/faqs.html" target="_blank" rel="noopener">常见问题</a>：NexT 使用中常见的问题。当您在使用中有疑问的时候，不妨先来这里看看。 或者在这里分享您在使用过程中碰到的问题。</p>
<a id="more"></a>

<h4 id="1-基础配置"><a href="#1-基础配置" class="headerlink" title="1.基础配置"></a>1.基础配置</h4><h5 id="1-1-Next主题的启用"><a href="#1-1-Next主题的启用" class="headerlink" title="1.1 Next主题的启用"></a>1.1 Next主题的启用</h5><p>首先需要下载Next主题文件，放在themes文件夹下，修改Hexo配置文件_config.yml中的 <code>theme: next</code> 即可。</p>
<h5 id="1-2-更改语言为中文"><a href="#1-2-更改语言为中文" class="headerlink" title="1.2 更改语言为中文"></a>1.2 更改语言为中文</h5><p>修改Hexo配置文件如下：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Site</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">CodeCat</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">''</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">''</span></span><br><span class="line"><span class="attr">keywords:</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">Mr.Lu</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-Hans</span></span><br><span class="line"><span class="attr">timezone:</span> <span class="string">''</span></span><br></pre></td></tr></table></figure>



<h5 id="1-3-增加标签页和分类页"><a href="#1-3-增加标签页和分类页" class="headerlink" title="1.3 增加标签页和分类页"></a>1.3 增加标签页和分类页</h5><p>在主题配置文件_config.yml中搜索menu定位，启用标签页和分类页，如下：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">home:</span> <span class="string">/||</span> <span class="string">home</span></span><br><span class="line">  <span class="comment">#about: /about/ || user</span></span><br><span class="line">  <span class="attr">tags:</span> <span class="string">/tags/||</span> <span class="string">tags</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="string">/categories/||</span> <span class="string">th</span></span><br><span class="line">  <span class="attr">archives:</span> <span class="string">/archives/||</span> <span class="string">archive</span></span><br><span class="line">  <span class="comment">#schedule: /schedule/ || calendar</span></span><br><span class="line">  <span class="comment">#sitemap: /sitemap.xml || sitemap</span></span><br><span class="line">  <span class="comment">#commonweal: /404/ || heartbeat</span></span><br></pre></td></tr></table></figure>

<p>之后需要生成tags和categories文件，在blog/source文件夹下有对应的文件夹。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo n page tags</span><br><span class="line">hexo n page categories</span><br></pre></td></tr></table></figure>

<p>编辑blog/source/tags下的index.md文件。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">标签</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2020</span><span class="number">-07</span><span class="number">-18</span> <span class="number">22</span><span class="string">:44:25</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">"tags"</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure>

<p>编辑blog/source/categories下的index.md文件。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">分类</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2020</span><span class="number">-07</span><span class="number">-18</span> <span class="number">22</span><span class="string">:50:46</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">"categories"</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure>

<p>在编写的每一篇博客顶部有如下属性配置，可以自定义博客的标签属性和分类属性，如下所示：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">title: Hexo主题next的美化配置</span><br><span class="line">date: 2020-07-19 10:49:28</span><br><span class="line">tags:</span><br><span class="line">	- hexo</span><br><span class="line">	- next主题</span><br><span class="line">categories: Web前端</span><br></pre></td></tr></table></figure>



<h5 id="1-4-增加about简介页"><a href="#1-4-增加about简介页" class="headerlink" title="1.4 增加about简介页"></a>1.4 增加about简介页</h5><ul>
<li><p>生成文件</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo new page &quot;about&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>然后修改所用主题目录下的<code>_config.yml</code>文件，将<code>menu</code>中<code>about</code>前的注释去掉。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">home:</span>  <span class="string">/</span> <span class="string">||</span> <span class="string">home</span></span><br><span class="line">  <span class="attr">about:</span>  <span class="string">/about/</span> <span class="string">||</span> <span class="string">user</span></span><br><span class="line">  <span class="attr">tags:</span>  <span class="string">/tags/</span> <span class="string">||</span> <span class="string">tags</span></span><br><span class="line">  <span class="string">...</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>然后修改<code>source/about/</code>目录中的<code>index.md</code>文件即可。</p>
</li>
</ul>
<h4 id="2-美化配置"><a href="#2-美化配置" class="headerlink" title="2.美化配置"></a>2.美化配置</h4><h5 id="2-1-主题样式更改"><a href="#2-1-主题样式更改" class="headerlink" title="2.1 主题样式更改"></a>2.1 主题样式更改</h5><p>编辑修改<strong>主题配置</strong>文件，如下所示：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 设置主题Schemes</span></span><br><span class="line"><span class="comment">#scheme: Muse</span></span><br><span class="line"><span class="comment">#scheme: Mist</span></span><br><span class="line"><span class="comment">#scheme: Pisces</span></span><br><span class="line"><span class="attr">scheme:</span> <span class="string">Gemini</span></span><br></pre></td></tr></table></figure>



<h5 id="2-1-更改头像"><a href="#2-1-更改头像" class="headerlink" title="2.1 更改头像"></a>2.1 更改头像</h5><p>编辑修改<strong>主题配置</strong>文件，其中头像图片文件位置在 <code>主题/source/images</code>下。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 设置头像</span></span><br><span class="line"><span class="comment"># Sidebar Avatar</span></span><br><span class="line"><span class="comment"># in theme directory(source/images): /images/avatar.gif</span></span><br><span class="line"><span class="comment"># in site  directory(source/uploads): /uploads/avatar.gif</span></span><br><span class="line"><span class="attr">avatar:</span> <span class="string">/images/jaychou.JPG</span></span><br></pre></td></tr></table></figure>

<p>设置头像为圆形可旋转。修改blog\themes\next\source\css_common\components\sidebar\sidebar-author.styl文件，</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">.site-author-image &#123;</span><br><span class="line">  display: block;</span><br><span class="line">  margin: <span class="number">0</span> auto;</span><br><span class="line">  padding: $site-author-image-padding;</span><br><span class="line">  max-width: $site-author-image-width;</span><br><span class="line">  height: $site-author-image-height;</span><br><span class="line">  border: $site-author-image-border-width solid $site-author-image-border-color;</span><br><span class="line">  border-radius: <span class="number">50</span>%;</span><br><span class="line">  transition: <span class="number">5</span>s all;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.site-author-image:hover&#123;</span><br><span class="line">	transform: rotate(<span class="number">720</span>deg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="2-2-更改标题、作者和链接"><a href="#2-2-更改标题、作者和链接" class="headerlink" title="2.2 更改标题、作者和链接"></a>2.2 更改标题、作者和链接</h5><p>标题和作者信息修改可参考<strong>1.2</strong>节中的配置文件。</p>
<h5 id="2-3-启用侧边栏社交链接"><a href="#2-3-启用侧边栏社交链接" class="headerlink" title="2.3 启用侧边栏社交链接"></a>2.3 启用侧边栏社交链接</h5><p>编辑修改<strong>主题配置</strong>文件。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># 侧边栏设置 Sidebar Settings</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Social Links.</span></span><br><span class="line"><span class="comment"># Usage: `Key: permalink || icon`</span></span><br><span class="line"><span class="comment"># Key is the link label showing to end users.</span></span><br><span class="line"><span class="comment"># Value before `||` delimeter is the target permalink.</span></span><br><span class="line"><span class="comment"># Value after `||` delimeter is the name of FontAwesome icon. If icon (with or without delimeter) is not specified, globe icon will be loaded.</span></span><br><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="attr">GitHub:</span> <span class="string">https://github.com/IAmLuwenyang</span> <span class="string">||</span> <span class="string">github</span></span><br><span class="line">  <span class="attr">E-Mail:</span> <span class="string">mailto:2052987369@qq.com</span> <span class="string">||</span> <span class="string">envelope</span></span><br><span class="line">  <span class="comment">#Google: https://plus.google.com/yourname || google</span></span><br><span class="line">  <span class="comment"># Twitter: https://twitter.com/yourname || twitter</span></span><br><span class="line">  <span class="comment">#FB Page: https://www.facebook.com/yourname || facebook</span></span><br><span class="line">  <span class="comment">#VK Group: https://vk.com/yourname || vk</span></span><br><span class="line">  <span class="comment">#StackOverflow: https://stackoverflow.com/yourname || stack-overflow</span></span><br><span class="line">  <span class="attr">YouTube:</span> <span class="string">https://youtube.com/yourname</span> <span class="string">||</span> <span class="string">youtube</span></span><br><span class="line">  <span class="comment">#Instagram: https://instagram.com/yourname || instagram</span></span><br><span class="line">  <span class="comment">#Skype: skype:yourname?call|chat || skype</span></span><br><span class="line">  <span class="string">微博:</span> <span class="string">http://weibo.com/MrLu-HUST</span> <span class="string">||</span> <span class="string">weibo</span></span><br><span class="line">  <span class="comment"># 知乎: http://www.zhihu.com/people/Mr.Lu || zhihu</span></span><br></pre></td></tr></table></figure>



<h5 id="2-4-启用友情链接"><a href="#2-4-启用友情链接" class="headerlink" title="2.4 启用友情链接"></a>2.4 启用友情链接</h5><p>编辑修改<strong>主题配置</strong>文件。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 友情链接</span></span><br><span class="line"><span class="attr">links:</span></span><br><span class="line">  <span class="string">回家导航:</span> <span class="string">http://iamluwenyang.git.io/</span></span><br><span class="line">  <span class="string">百度导航:</span> <span class="string">https://baidu.com</span></span><br></pre></td></tr></table></figure>



<h5 id="2-5-开启打赏功能"><a href="#2-5-开启打赏功能" class="headerlink" title="2.5 开启打赏功能"></a>2.5 开启打赏功能</h5><p>编辑修改<strong>主题配置</strong>文件。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 开启打赏功能 Reward</span></span><br><span class="line"><span class="attr">reward_comment:</span> <span class="string">客官先打赏再走呗！</span></span><br><span class="line"><span class="attr">wechatpay:</span> <span class="string">/images/wechatpay.jpg</span></span><br><span class="line"><span class="attr">alipay:</span> <span class="string">/images/alipay.jpg</span></span><br><span class="line"><span class="comment">#bitcoin: /images/bitcoin.png</span></span><br></pre></td></tr></table></figure>



<h5 id="2-6-开启订阅公众号"><a href="#2-6-开启订阅公众号" class="headerlink" title="2.6 开启订阅公众号"></a>2.6 开启订阅公众号</h5><p>编辑修改<strong>主题配置</strong>文件。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 微信公众号订阅-Wechat Subscriber</span></span><br><span class="line"><span class="attr">wechat_subscriber:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">qcode:</span> <span class="string">/images/WX.JPG</span></span><br><span class="line">  <span class="attr">description:</span> <span class="string">扫一扫上面的二维码图案，加我微信</span></span><br></pre></td></tr></table></figure>



<h5 id="2-7-首页显示阅读全文"><a href="#2-7-首页显示阅读全文" class="headerlink" title="2.7 首页显示阅读全文"></a>2.7 首页显示阅读全文</h5><p>编辑修改<strong>主题配置</strong>文件。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Automatically Excerpt. Not recommend.</span></span><br><span class="line"><span class="comment"># Please use &lt;!-- more --&gt; in the post to control excerpt accurately.</span></span><br><span class="line"><span class="comment"># 设置首页阅读全文</span></span><br><span class="line"><span class="attr">auto_excerpt:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">length:</span> <span class="number">500</span></span><br></pre></td></tr></table></figure>



<h5 id="2-8-添加fork-Github"><a href="#2-8-添加fork-Github" class="headerlink" title="2.8 添加fork Github"></a>2.8 添加fork Github</h5><p>在博客角落显示Github连接图标，在<a href="http://tholman.com/github-corners/" target="_blank" rel="noopener">GitHub Corners</a>中选择显示样式，复制在<code>blog\themes\next\layout\_layout.swig</code>文件的<code>&lt;div class=&quot;headband&quot;&gt;&lt;/div&gt;</code>位置下粘贴即可。</p>
<h5 id="2-9-关闭Next目录的自动添加序号"><a href="#2-9-关闭Next目录的自动添加序号" class="headerlink" title="2.9 关闭Next目录的自动添加序号"></a>2.9 关闭Next目录的自动添加序号</h5><p>在 Next 的配置文件 _config.yml 中搜索 number 定位，将 <code>number: true</code> 修改为 <code>number: false</code> 即可。</p>
<h5 id="2-10-修改文章内链接样式"><a href="#2-10-修改文章内链接样式" class="headerlink" title="2.10 修改文章内链接样式"></a>2.10 修改文章内链接样式</h5><p>在blog\themes\next\source\css_common\components\post\post.styl中修改</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">.post-body p a&#123;</span><br><span class="line">  color: #345;</span><br><span class="line">  border-bottom: none;</span><br><span class="line">  &amp;:hover&#123;</span><br><span class="line">    color: blue;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>



<h5 id="2-11-修改文章底部标签前图标样式"><a href="#2-11-修改文章底部标签前图标样式" class="headerlink" title="2.11 修改文章底部标签前图标样式"></a>2.11 修改文章底部标签前图标样式</h5><p>在<a href="http://www.fontawesome.com.cn/faicons/" target="_blank" rel="noopener">Font Awesome</a>中选择合适的图标样式，之后在blog\themes\next\layout_macro\posts.wig中修改，位置大约为359行</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;post-tags&quot;&gt;</span><br><span class="line">    &#123;% for tag in post.tags %&#125;</span><br><span class="line">    	&lt;a href&#x3D;&quot;&#123;&#123; url_for(tag.path) &#125;&#125;&quot; rel&#x3D;&quot;tag&quot;&gt;</span><br><span class="line">    	&lt;i class&#x3D;&quot;fa fa-cog fa-spin&quot;&gt;&lt;&#x2F;i&gt; &#123;&#123; tag.name &#125;&#125;&lt;&#x2F;a&gt;</span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>



<h4 id="3-进阶功能"><a href="#3-进阶功能" class="headerlink" title="3.进阶功能"></a>3.进阶功能</h4><h5 id="3-1-增加Valine评论功能"><a href="#3-1-增加Valine评论功能" class="headerlink" title="3.1 增加Valine评论功能"></a>3.1 增加Valine评论功能</h5><p>在 Next 的配置文件 _config.yml 中搜索 <strong>Valine</strong> 定位到配置项，需要在 <a href="https://leancloud.cn" target="_blank" rel="noopener">LeanCloud</a> 注册账号创建应用，之后在应用 Keys 中的 Credentials 的 AppID、AppKey信息复制粘贴到 _config.yml 对应位置中就完成了 Valine 评论功能的支持，具体配置如下所示：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 评论功能-Valine.</span></span><br><span class="line"><span class="comment"># You can get your appid and appkey from https://leancloud.cn</span></span><br><span class="line"><span class="comment"># more info please open https://valine.js.org</span></span><br><span class="line"><span class="attr">valine:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">appid:</span> <span class="string">**************************</span> <span class="comment"># your leancloud application appid</span></span><br><span class="line">  <span class="attr">appkey:</span> <span class="string">**********************</span> <span class="comment"># your leancloud application appkey</span></span><br><span class="line">  <span class="attr">notify:</span> <span class="literal">false</span> <span class="comment"># mail notifier , https://github.com/xCss/Valine/wiki</span></span><br><span class="line">  <span class="attr">verify:</span> <span class="literal">false</span> <span class="comment"># Verification code</span></span><br><span class="line">  <span class="attr">placeholder:</span> <span class="string">Just</span> <span class="string">go</span> <span class="string">go</span> <span class="comment"># comment box placeholder</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="string">mm</span> <span class="comment"># gravatar style</span></span><br><span class="line">  <span class="attr">guest_info:</span> <span class="string">nick,mail,link</span> <span class="comment"># custom comment header</span></span><br><span class="line">  <span class="attr">pageSize:</span> <span class="number">10</span> <span class="comment"># pagination size</span></span><br></pre></td></tr></table></figure>



<h5 id="3-2-增加来必力评论"><a href="#3-2-增加来必力评论" class="headerlink" title="3.2 增加来必力评论"></a>3.2 增加来必力评论</h5><p>在<a href="http://livere.com/" target="_blank" rel="noopener">来必力</a>网站上注册登录后，点击安装选择City，之后将来必力City版安装代码的data-uid复制粘贴到livere_uid中即可。</p>
<h5 id="3-3-增加Gitmen评论"><a href="#3-3-增加Gitmen评论" class="headerlink" title="3.3 增加Gitmen评论"></a>3.3 增加Gitmen评论</h5><p>由于是Github的评论系统，因此需要创建一个仓库来存储评论数据。在 <a href="https://github.com/settings/applications/new" target="_blank" rel="noopener">https://github.com/settings/applications/new</a> 下新建一个应用，之后将github_user、github_repo、client_id、client_secret对应替换即可。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 评论功能-Gitment</span></span><br><span class="line"><span class="comment"># Introduction: https://imsun.net/posts/gitment-introduction/</span></span><br><span class="line"><span class="comment"># You can get your Github ID from https://api.github.com/users/&lt;Github username&gt;</span></span><br><span class="line"><span class="attr">gitment:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">mint:</span> <span class="literal">true</span> <span class="comment"># RECOMMEND, A mint on Gitment, to support count, language and proxy_gateway</span></span><br><span class="line">  <span class="attr">count:</span> <span class="literal">true</span> <span class="comment"># Show comments count in post meta area</span></span><br><span class="line">  <span class="attr">lazy:</span> <span class="literal">false</span> <span class="comment"># Comments lazy loading with a button</span></span><br><span class="line">  <span class="attr">cleanly:</span> <span class="literal">false</span> <span class="comment"># Hide 'Powered by ...' on footer, and more</span></span><br><span class="line">  <span class="attr">language:</span> <span class="comment"># Force language, or auto switch by theme</span></span><br><span class="line">  <span class="attr">github_user:</span> <span class="comment"># MUST HAVE, Your Github ID</span></span><br><span class="line">  <span class="attr">github_repo:</span> <span class="comment"># MUST HAVE, The repo you use to store Gitment comments</span></span><br><span class="line">  <span class="attr">client_id:</span> <span class="comment"># MUST HAVE, Github client id for the Gitment</span></span><br><span class="line">  <span class="attr">client_secret:</span> <span class="comment"># EITHER this or proxy_gateway, Github access secret token for the Gitment</span></span><br><span class="line">  <span class="attr">proxy_gateway:</span> <span class="comment"># Address of api proxy, See: https://github.com/aimingoo/intersect</span></span><br><span class="line">  <span class="attr">redirect_protocol:</span> <span class="comment"># Protocol of redirect_uri with force_redirect_protocol when mint enabled</span></span><br></pre></td></tr></table></figure>



<h5 id="3-4-增加搜索功能"><a href="#3-4-增加搜索功能" class="headerlink" title="3.4 增加搜索功能"></a>3.4 增加搜索功能</h5><p>NexT 支持集成 <a href="https://swiftype.com/" target="_blank" rel="noopener">Swiftype</a>、 <a href="http://tinysou.com/" target="_blank" rel="noopener">微搜索</a>、Local Search 和 Algolia。我们选用Local Search添加百度/谷歌/本地 自定义站点内容搜索。<a href="http://theme-next.iissnan.com/third-party-services.html#search-system" target="_blank" rel="noopener">点击查看详情</a>。</p>
<ul>
<li>安装 <code>hexo-generator-searchdb</code>，在站点的根目录下执行以下命令：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ cnpm install hexo-generator-searchdb --save</span><br></pre></td></tr></table></figure>

<ul>
<li>编辑 <strong>站点配置文件</strong>，在Hexo配置文件_config.yml新增以下内容到任意位置：</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span></span><br><span class="line">  <span class="attr">format:</span> <span class="string">html</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">10000</span></span><br></pre></td></tr></table></figure>

<ul>
<li>编辑 <strong>主题配置文件</strong>，启用本地搜索功能：</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Local search</span></span><br><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>



<h5 id="3-5-增加不蒜子统计功能"><a href="#3-5-增加不蒜子统计功能" class="headerlink" title="3.5 增加不蒜子统计功能"></a>3.5 增加不蒜子统计功能</h5><p>编辑 <strong>主题配置文件</strong> 中的<code>busuanzi_count</code>的配置项。当<code>enable: true</code>时，代表开启全局开关。若<code>site_uv</code>、<code>site_pv</code>、<code>page_pv</code>的值均为<code>false</code>时，不蒜子仅作记录而不会在页面上显示。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">busuanzi_count:</span></span><br><span class="line">  <span class="comment"># count values only if the other configs are false</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># custom uv span for the whole site</span></span><br><span class="line">  <span class="attr">site_uv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">site_uv_header:</span> <span class="string">本站访问数</span> <span class="string">&lt;i</span> <span class="string">class="fa</span> <span class="string">fa-user"&gt;&lt;/i&gt;</span></span><br><span class="line">  <span class="attr">site_uv_footer:</span> <span class="string">人次</span></span><br><span class="line">  <span class="comment"># custom pv span for the whole site</span></span><br><span class="line">  <span class="attr">site_pv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">site_pv_header:</span> <span class="string">本站总访问量</span> <span class="string">&lt;i</span> <span class="string">class="fa</span> <span class="string">fa-eye"&gt;&lt;/i&gt;</span></span><br><span class="line">  <span class="attr">site_pv_footer:</span> <span class="string">次</span></span><br><span class="line">  <span class="comment"># custom pv span for one page only</span></span><br><span class="line">  <span class="attr">page_pv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">page_pv_header:</span> <span class="string">本文总阅读数</span> <span class="string">&lt;i</span> <span class="string">class="fa</span> <span class="string">fa-file-o"&gt;&lt;/i&gt;</span></span><br><span class="line">  <span class="attr">page_pv_footer:</span> <span class="string">次</span></span><br></pre></td></tr></table></figure>

<p>如果失效，更换\themes\next\layout_third-party\analytics\busuanzi-counter.swig中的域名。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!--原始--&gt;</span><br><span class="line">&lt;script <span class="keyword">async</span> src=<span class="string">"https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;!--更换后--&gt;</span></span><br><span class="line"><span class="regexp">&lt;script async src="https:/</span><span class="regexp">/busuanzi.ibruce.info/</span>busuanzi/<span class="number">2.3</span>/busuanzi.pure.mini.js<span class="string">"&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="3-6-增加内容分享服务"><a href="#3-6-增加内容分享服务" class="headerlink" title="3.6 增加内容分享服务"></a>3.6 增加内容分享服务</h5><p><strong>JiaThis</strong></p>
<p>编辑 <strong>主题配置文件</strong>， 添加/修改字段 <code>jiathis</code>，值为 <code>true</code>。</p>
<p> JiaThis 内容分享服务配置示例</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># JiaThis 分享服务</span><br><span class="line">jiathis: true</span><br></pre></td></tr></table></figure>

<p><strong>百度分享</strong></p>
<p>编辑 <strong>主题配置文件</strong>，添加/修改字段 <code>baidushare</code>，值为 <code>true</code>。</p>
<p> 百度内容分享服务配置示例</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 百度分享服务</span><br><span class="line">baidushare: true</span><br></pre></td></tr></table></figure>



<h5 id="3-7-增加加载效果"><a href="#3-7-增加加载效果" class="headerlink" title="3.7 增加加载效果"></a>3.7 增加加载效果</h5><p>编辑 <strong>主题配置文件</strong>，搜索pace定位，修改如下：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Progress bar in the top during page loading.</span></span><br><span class="line"><span class="attr">pace:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># Themes list:</span></span><br><span class="line"><span class="comment">#pace-theme-big-counter</span></span><br><span class="line"><span class="comment">#pace-theme-bounce</span></span><br><span class="line"><span class="comment">#pace-theme-barber-shop</span></span><br><span class="line"><span class="comment">#pace-theme-center-atom</span></span><br><span class="line"><span class="comment">#pace-theme-center-circle</span></span><br><span class="line"><span class="comment">#pace-theme-center-radar</span></span><br><span class="line"><span class="comment">#pace-theme-center-simple</span></span><br><span class="line"><span class="comment">#pace-theme-corner-indicator</span></span><br><span class="line"><span class="comment">#pace-theme-fill-left</span></span><br><span class="line"><span class="comment">#pace-theme-flash</span></span><br><span class="line"><span class="comment">#pace-theme-loading-bar</span></span><br><span class="line"><span class="comment">#pace-theme-mac-osx</span></span><br><span class="line"><span class="comment">#pace-theme-minimal</span></span><br><span class="line"><span class="comment"># For example</span></span><br><span class="line"><span class="comment"># pace_theme: pace-theme-center-simple</span></span><br><span class="line"><span class="attr">pace_theme:</span> <span class="string">pace-theme-minimal</span></span><br></pre></td></tr></table></figure>



<h5 id="3-8-增加点击爆炸效果"><a href="#3-8-增加点击爆炸效果" class="headerlink" title="3.8 增加点击爆炸效果"></a>3.8 增加点击爆炸效果</h5><ul>
<li><p>创建爆炸js文件，在/themes/next/source/js/src下新建文件fireworks.js，并复制粘贴如下代码。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;<span class="function"><span class="keyword">function</span> <span class="title">updateCoords</span>(<span class="params">e</span>)</span>&#123;pointerX=(e.clientX||e.touches[<span class="number">0</span>].clientX)-canvasEl.getBoundingClientRect().left,pointerY=e.clientY||e.touches[<span class="number">0</span>].clientY-canvasEl.getBoundingClientRect().top&#125;<span class="function"><span class="keyword">function</span> <span class="title">setParticuleDirection</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">var</span> t=anime.random(<span class="number">0</span>,<span class="number">360</span>)*<span class="built_in">Math</span>.PI/<span class="number">180</span>,a=anime.random(<span class="number">50</span>,<span class="number">180</span>),n=[<span class="number">-1</span>,<span class="number">1</span>][anime.random(<span class="number">0</span>,<span class="number">1</span>)]*a;<span class="keyword">return</span>&#123;<span class="attr">x</span>:e.x+n*<span class="built_in">Math</span>.cos(t),<span class="attr">y</span>:e.y+n*<span class="built_in">Math</span>.sin(t)&#125;&#125;<span class="function"><span class="keyword">function</span> <span class="title">createParticule</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">var</span> a=&#123;&#125;;<span class="keyword">return</span> a.x=e,a.y=t,a.color=colors[anime.random(<span class="number">0</span>,colors.length<span class="number">-1</span>)],a.radius=anime.random(<span class="number">16</span>,<span class="number">32</span>),a.endPos=setParticuleDirection(a),a.draw=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">Math</span>.PI,!<span class="number">0</span>),ctx.fillStyle=a.color,ctx.fill()&#125;,a&#125;<span class="function"><span class="keyword">function</span> <span class="title">createCircle</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">var</span> a=&#123;&#125;;<span class="keyword">return</span> a.x=e,a.y=t,a.color=<span class="string">"#F00"</span>,a.radius=<span class="number">0.1</span>,a.alpha=<span class="number">0.5</span>,a.lineWidth=<span class="number">6</span>,a.draw=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;ctx.globalAlpha=a.alpha,ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">Math</span>.PI,!<span class="number">0</span>),ctx.lineWidth=a.lineWidth,ctx.strokeStyle=a.color,ctx.stroke(),ctx.globalAlpha=<span class="number">1</span>&#125;,a&#125;<span class="function"><span class="keyword">function</span> <span class="title">renderParticule</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> t=<span class="number">0</span>;t&lt;e.animatables.length;t++)&#123;e.animatables[t].target.draw()&#125;&#125;<span class="function"><span class="keyword">function</span> <span class="title">animateParticules</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> a=createCircle(e,t),n=[],i=<span class="number">0</span>;i&lt;numberOfParticules;i++)&#123;n.push(createParticule(e,t))&#125;anime.timeline().add(&#123;<span class="attr">targets</span>:n,<span class="attr">x</span>:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">return</span> e.endPos.x&#125;,<span class="attr">y</span>:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">return</span> e.endPos.y&#125;,<span class="attr">radius</span>:<span class="number">0.1</span>,<span class="attr">duration</span>:anime.random(<span class="number">1200</span>,<span class="number">1800</span>),<span class="attr">easing</span>:<span class="string">"easeOutExpo"</span>,<span class="attr">update</span>:renderParticule&#125;).add(&#123;<span class="attr">targets</span>:a,<span class="attr">radius</span>:anime.random(<span class="number">80</span>,<span class="number">160</span>),<span class="attr">lineWidth</span>:<span class="number">0</span>,<span class="attr">alpha</span>:&#123;<span class="attr">value</span>:<span class="number">0</span>,<span class="attr">easing</span>:<span class="string">"linear"</span>,<span class="attr">duration</span>:anime.random(<span class="number">600</span>,<span class="number">800</span>)&#125;,<span class="attr">duration</span>:anime.random(<span class="number">1200</span>,<span class="number">1800</span>),<span class="attr">easing</span>:<span class="string">"easeOutExpo"</span>,<span class="attr">update</span>:renderParticule,<span class="attr">offset</span>:<span class="number">0</span>&#125;)&#125;<span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">var</span> a;<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">var</span> n=<span class="keyword">this</span>,i=<span class="built_in">arguments</span>;clearTimeout(a),a=setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;e.apply(n,i)&#125;,t)&#125;&#125;<span class="keyword">var</span> canvasEl=<span class="built_in">document</span>.querySelector(<span class="string">".fireworks"</span>);<span class="keyword">if</span>(canvasEl)&#123;<span class="keyword">var</span> ctx=canvasEl.getContext(<span class="string">"2d"</span>),numberOfParticules=<span class="number">30</span>,pointerX=<span class="number">0</span>,pointerY=<span class="number">0</span>,tap=<span class="string">"mousedown"</span>,colors=[<span class="string">"#FF1461"</span>,<span class="string">"#18FF92"</span>,<span class="string">"#5A87FF"</span>,<span class="string">"#FBF38C"</span>],setCanvasSize=debounce(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;canvasEl.width=<span class="number">2</span>*<span class="built_in">window</span>.innerWidth,canvasEl.height=<span class="number">2</span>*<span class="built_in">window</span>.innerHeight,canvasEl.style.width=<span class="built_in">window</span>.innerWidth+<span class="string">"px"</span>,canvasEl.style.height=<span class="built_in">window</span>.innerHeight+<span class="string">"px"</span>,canvasEl.getContext(<span class="string">"2d"</span>).scale(<span class="number">2</span>,<span class="number">2</span>)&#125;,<span class="number">500</span>),render=anime(&#123;<span class="attr">duration</span>:<span class="number">1</span>/<span class="number">0</span>,<span class="attr">update</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;ctx.clearRect(<span class="number">0</span>,<span class="number">0</span>,canvasEl.width,canvasEl.height)&#125;&#125;);<span class="built_in">document</span>.addEventListener(tap,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="string">"sidebar"</span>!==e.target.id&amp;&amp;<span class="string">"toggle-sidebar"</span>!==e.target.id&amp;&amp;<span class="string">"A"</span>!==e.target.nodeName&amp;&amp;<span class="string">"IMG"</span>!==e.target.nodeName&amp;&amp;(render.play(),updateCoords(e),animateParticules(pointerX,pointerY))&#125;,!<span class="number">1</span>),setCanvasSize(),<span class="built_in">window</span>.addEventListener(<span class="string">"resize"</span>,setCanvasSize,!<span class="number">1</span>)&#125;<span class="string">"use strict"</span>;<span class="function"><span class="keyword">function</span> <span class="title">updateCoords</span>(<span class="params">e</span>)</span>&#123;pointerX=(e.clientX||e.touches[<span class="number">0</span>].clientX)-canvasEl.getBoundingClientRect().left,pointerY=e.clientY||e.touches[<span class="number">0</span>].clientY-canvasEl.getBoundingClientRect().top&#125;<span class="function"><span class="keyword">function</span> <span class="title">setParticuleDirection</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">var</span> t=anime.random(<span class="number">0</span>,<span class="number">360</span>)*<span class="built_in">Math</span>.PI/<span class="number">180</span>,a=anime.random(<span class="number">50</span>,<span class="number">180</span>),n=[<span class="number">-1</span>,<span class="number">1</span>][anime.random(<span class="number">0</span>,<span class="number">1</span>)]*a;<span class="keyword">return</span>&#123;<span class="attr">x</span>:e.x+n*<span class="built_in">Math</span>.cos(t),<span class="attr">y</span>:e.y+n*<span class="built_in">Math</span>.sin(t)&#125;&#125;<span class="function"><span class="keyword">function</span> <span class="title">createParticule</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">var</span> a=&#123;&#125;;<span class="keyword">return</span> a.x=e,a.y=t,a.color=colors[anime.random(<span class="number">0</span>,colors.length<span class="number">-1</span>)],a.radius=anime.random(<span class="number">16</span>,<span class="number">32</span>),a.endPos=setParticuleDirection(a),a.draw=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">Math</span>.PI,!<span class="number">0</span>),ctx.fillStyle=a.color,ctx.fill()&#125;,a&#125;<span class="function"><span class="keyword">function</span> <span class="title">createCircle</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">var</span> a=&#123;&#125;;<span class="keyword">return</span> a.x=e,a.y=t,a.color=<span class="string">"#F00"</span>,a.radius=<span class="number">0.1</span>,a.alpha=<span class="number">0.5</span>,a.lineWidth=<span class="number">6</span>,a.draw=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;ctx.globalAlpha=a.alpha,ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">Math</span>.PI,!<span class="number">0</span>),ctx.lineWidth=a.lineWidth,ctx.strokeStyle=a.color,ctx.stroke(),ctx.globalAlpha=<span class="number">1</span>&#125;,a&#125;<span class="function"><span class="keyword">function</span> <span class="title">renderParticule</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> t=<span class="number">0</span>;t&lt;e.animatables.length;t++)&#123;e.animatables[t].target.draw()&#125;&#125;<span class="function"><span class="keyword">function</span> <span class="title">animateParticules</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> a=createCircle(e,t),n=[],i=<span class="number">0</span>;i&lt;numberOfParticules;i++)&#123;n.push(createParticule(e,t))&#125;anime.timeline().add(&#123;<span class="attr">targets</span>:n,<span class="attr">x</span>:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">return</span> e.endPos.x&#125;,<span class="attr">y</span>:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">return</span> e.endPos.y&#125;,<span class="attr">radius</span>:<span class="number">0.1</span>,<span class="attr">duration</span>:anime.random(<span class="number">1200</span>,<span class="number">1800</span>),<span class="attr">easing</span>:<span class="string">"easeOutExpo"</span>,<span class="attr">update</span>:renderParticule&#125;).add(&#123;<span class="attr">targets</span>:a,<span class="attr">radius</span>:anime.random(<span class="number">80</span>,<span class="number">160</span>),<span class="attr">lineWidth</span>:<span class="number">0</span>,<span class="attr">alpha</span>:&#123;<span class="attr">value</span>:<span class="number">0</span>,<span class="attr">easing</span>:<span class="string">"linear"</span>,<span class="attr">duration</span>:anime.random(<span class="number">600</span>,<span class="number">800</span>)&#125;,<span class="attr">duration</span>:anime.random(<span class="number">1200</span>,<span class="number">1800</span>),<span class="attr">easing</span>:<span class="string">"easeOutExpo"</span>,<span class="attr">update</span>:renderParticule,<span class="attr">offset</span>:<span class="number">0</span>&#125;)&#125;<span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">var</span> a;<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">var</span> n=<span class="keyword">this</span>,i=<span class="built_in">arguments</span>;clearTimeout(a),a=setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;e.apply(n,i)&#125;,t)&#125;&#125;<span class="keyword">var</span> canvasEl=<span class="built_in">document</span>.querySelector(<span class="string">".fireworks"</span>);<span class="keyword">if</span>(canvasEl)&#123;<span class="keyword">var</span> ctx=canvasEl.getContext(<span class="string">"2d"</span>),numberOfParticules=<span class="number">30</span>,pointerX=<span class="number">0</span>,pointerY=<span class="number">0</span>,tap=<span class="string">"mousedown"</span>,colors=[<span class="string">"#FF1461"</span>,<span class="string">"#18FF92"</span>,<span class="string">"#5A87FF"</span>,<span class="string">"#FBF38C"</span>],setCanvasSize=debounce(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;canvasEl.width=<span class="number">2</span>*<span class="built_in">window</span>.innerWidth,canvasEl.height=<span class="number">2</span>*<span class="built_in">window</span>.innerHeight,canvasEl.style.width=<span class="built_in">window</span>.innerWidth+<span class="string">"px"</span>,canvasEl.style.height=<span class="built_in">window</span>.innerHeight+<span class="string">"px"</span>,canvasEl.getContext(<span class="string">"2d"</span>).scale(<span class="number">2</span>,<span class="number">2</span>)&#125;,<span class="number">500</span>),render=anime(&#123;<span class="attr">duration</span>:<span class="number">1</span>/<span class="number">0</span>,<span class="attr">update</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;ctx.clearRect(<span class="number">0</span>,<span class="number">0</span>,canvasEl.width,canvasEl.height)&#125;&#125;);<span class="built_in">document</span>.addEventListener(tap,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="string">"sidebar"</span>!==e.target.id&amp;&amp;<span class="string">"toggle-sidebar"</span>!==e.target.id&amp;&amp;<span class="string">"A"</span>!==e.target.nodeName&amp;&amp;<span class="string">"IMG"</span>!==e.target.nodeName&amp;&amp;(render.play(),updateCoords(e),animateParticules(pointerX,pointerY))&#125;,!<span class="number">1</span>),setCanvasSize(),<span class="built_in">window</span>.addEventListener(<span class="string">"resize"</span>,setCanvasSize,!<span class="number">1</span>)&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在\themes\next\layout\ _layout.swig文件的<code>&lt;body&gt;</code>标签最后添加：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;% <span class="keyword">if</span> theme.fireworks %&#125;</span><br><span class="line">&lt;canvas <span class="class"><span class="keyword">class</span></span>=<span class="string">"fireworks"</span> style=<span class="string">"position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;"</span> &gt;&lt;<span class="regexp">/canvas&gt;</span></span><br><span class="line"><span class="regexp">&lt;script type="text/</span>javascript<span class="string">" src="</span><span class="comment">//cdn.bootcss.com/animejs/2.2.0/anime.min.js"&gt;&lt;/script&gt;</span></span><br><span class="line">&lt;script type=<span class="string">"text/javascript"</span> src=<span class="string">"/js/src/fireworks.js"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&#123;% endif %&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>主题配置文件<strong>新增</strong>如下内容：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Fireworks</span></span><br><span class="line"><span class="attr">fireworks:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>



</li>
</ul>
<h5 id="3-9-隐藏网页底部强力驱动"><a href="#3-9-隐藏网页底部强力驱动" class="headerlink" title="3.9 隐藏网页底部强力驱动"></a>3.9 隐藏网页底部强力驱动</h5><p>在主题配置文件将powerd和theme修改即可。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">footer:</span></span><br><span class="line">  <span class="comment"># Specify the date when the site was setup.</span></span><br><span class="line">  <span class="comment"># If not defined, current year will be used.</span></span><br><span class="line">  <span class="comment">#since: 2015</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Icon between year and copyright info.</span></span><br><span class="line">  <span class="attr">icon:</span> <span class="string">user</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># If not defined, will be used `author` from Hexo main config.</span></span><br><span class="line">  <span class="attr">copyright:</span></span><br><span class="line">  <span class="comment"># -------------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># Hexo link (Powered by Hexo).</span></span><br><span class="line">  <span class="attr">powered:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">theme:</span></span><br><span class="line">    <span class="comment"># Theme &amp; scheme info link (Theme - NexT.scheme).</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># Version info of NexT after scheme info (vX.X.X).</span></span><br><span class="line">    <span class="attr">version:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>



<h5 id="3-10-字数统计和阅读时长功能"><a href="#3-10-字数统计和阅读时长功能" class="headerlink" title="3.10 字数统计和阅读时长功能"></a>3.10 字数统计和阅读时长功能</h5><ul>
<li>安装插件：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cnpm install --save hexo-wordcount</span><br></pre></td></tr></table></figure>

<ul>
<li>修改主题配置文件：</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">post_wordcount:</span></span><br><span class="line">  <span class="attr">item_text:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">wordcount:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">min2read:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">totalcount:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">separated_meta:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>



<h5 id="3-11-博客添加显示图片"><a href="#3-11-博客添加显示图片" class="headerlink" title="3.11 博客添加显示图片"></a>3.11 博客添加显示图片</h5><ul>
<li><p>安装插件</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cnpm install --save hexo-asset-image</span><br></pre></td></tr></table></figure>
</li>
<li><p>完成安装后用hexo新建文章的时候会发现_posts目录下面会多出一个和文章名字一样的文件夹。图片就可以放在文件夹下面；</p>
</li>
<li><p>打开hexo的配置文件_config.yml，找到 post_asset_folder，把这个选项从false改成true；</p>
</li>
<li><p>打开/node_modules/hexo-asset-image/index.js，将内容更换为下面的代码</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"><span class="keyword">var</span> cheerio = <span class="built_in">require</span>(<span class="string">'cheerio'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// http://stackoverflow.com/questions/14480345/how-to-get-the-nth-occurrence-in-a-string</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPosition</span>(<span class="params">str, m, i</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> str.split(m, i).join(m).length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> version = <span class="built_in">String</span>(hexo.version).split(<span class="string">'.'</span>);</span><br><span class="line">hexo.extend.filter.register(<span class="string">'after_post_render'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> config = hexo.config;</span><br><span class="line">  <span class="keyword">if</span>(config.post_asset_folder)&#123;</span><br><span class="line">        <span class="keyword">var</span> link = data.permalink;</span><br><span class="line">    <span class="keyword">if</span>(version.length &gt; <span class="number">0</span> &amp;&amp; <span class="built_in">Number</span>(version[<span class="number">0</span>]) == <span class="number">3</span>)</span><br><span class="line">       <span class="keyword">var</span> beginPos = getPosition(link, <span class="string">'/'</span>, <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">       <span class="keyword">var</span> beginPos = getPosition(link, <span class="string">'/'</span>, <span class="number">3</span>) + <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// In hexo 3.1.1, the permalink of "about" page is like ".../about/index.html".</span></span><br><span class="line">    <span class="keyword">var</span> endPos = link.lastIndexOf(<span class="string">'/'</span>) + <span class="number">1</span>;</span><br><span class="line">    link = link.substring(beginPos, endPos);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> toprocess = [<span class="string">'excerpt'</span>, <span class="string">'more'</span>, <span class="string">'content'</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; toprocess.length; i++)&#123;</span><br><span class="line">      <span class="keyword">var</span> key = toprocess[i];</span><br><span class="line"> </span><br><span class="line">      <span class="keyword">var</span> $ = cheerio.load(data[key], &#123;</span><br><span class="line">        ignoreWhitespace: <span class="literal">false</span>,</span><br><span class="line">        xmlMode: <span class="literal">false</span>,</span><br><span class="line">        lowerCaseTags: <span class="literal">false</span>,</span><br><span class="line">        decodeEntities: <span class="literal">false</span></span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      $(<span class="string">'img'</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> ($(<span class="keyword">this</span>).attr(<span class="string">'src'</span>))&#123;</span><br><span class="line">            <span class="comment">// For windows style path, we replace '\' to '/'.</span></span><br><span class="line">            <span class="keyword">var</span> src = $(<span class="keyword">this</span>).attr(<span class="string">'src'</span>).replace(<span class="string">'\\'</span>, <span class="string">'/'</span>);</span><br><span class="line">            <span class="keyword">if</span>(!<span class="regexp">/http[s]*.*|\/\/.*/</span>.test(src) &amp;&amp;</span><br><span class="line">               !<span class="regexp">/^\s*\//</span>.test(src)) &#123;</span><br><span class="line">              <span class="comment">// For "about" page, the first part of "src" can't be removed.</span></span><br><span class="line">              <span class="comment">// In addition, to support multi-level local directory.</span></span><br><span class="line">              <span class="keyword">var</span> linkArray = link.split(<span class="string">'/'</span>).filter(<span class="function"><span class="keyword">function</span>(<span class="params">elem</span>)</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> elem != <span class="string">''</span>;</span><br><span class="line">              &#125;);</span><br><span class="line">              <span class="keyword">var</span> srcArray = src.split(<span class="string">'/'</span>).filter(<span class="function"><span class="keyword">function</span>(<span class="params">elem</span>)</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> elem != <span class="string">''</span> &amp;&amp; elem != <span class="string">'.'</span>;</span><br><span class="line">              &#125;);</span><br><span class="line">              <span class="keyword">if</span>(srcArray.length &gt; <span class="number">1</span>)</span><br><span class="line">                srcArray.shift();</span><br><span class="line">              src = srcArray.join(<span class="string">'/'</span>);</span><br><span class="line">              $(<span class="keyword">this</span>).attr(<span class="string">'src'</span>, config.root + link + src);</span><br><span class="line">              <span class="built_in">console</span>.info&amp;&amp;<span class="built_in">console</span>.info(<span class="string">"update link as:--&gt;"</span>+config.root + link + src);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.info&amp;&amp;<span class="built_in">console</span>.info(<span class="string">"no src attr, skipped..."</span>);</span><br><span class="line">            <span class="built_in">console</span>.info&amp;&amp;<span class="built_in">console</span>.info($(<span class="keyword">this</span>));</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">      data[key] = $.html();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>现在就可以插入图片了。</p>
</li>
</ul>
<h4 id="4-高级美化"><a href="#4-高级美化" class="headerlink" title="4.高级美化"></a>4.高级美化</h4><h5 id="4-1-彩色标签页"><a href="#4-1-彩色标签页" class="headerlink" title="4.1 彩色标签页"></a>4.1 彩色标签页</h5><p>在 <code>/themes/next/layout/</code> 目录下，新增 `` 文件，填入如下内容：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">     <span class="keyword">var</span> alltags = <span class="built_in">document</span>.getElementsByClassName(<span class="string">'tag-cloud-tags'</span>);</span><br><span class="line">     <span class="keyword">var</span> tags = alltags[<span class="number">0</span>].getElementsByTagName(<span class="string">'a'</span>);</span><br><span class="line">     <span class="keyword">for</span> (<span class="keyword">var</span> i = tags.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">       <span class="keyword">var</span> r=<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random()*<span class="number">75</span>+<span class="number">130</span>);</span><br><span class="line">       <span class="keyword">var</span> g=<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random()*<span class="number">75</span>+<span class="number">100</span>);</span><br><span class="line">       <span class="keyword">var</span> b=<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random()*<span class="number">75</span>+<span class="number">80</span>);</span><br><span class="line">       tags[i].style.background = <span class="string">"rgb("</span>+r+<span class="string">","</span>+g+<span class="string">","</span>+b+<span class="string">")"</span>;</span><br><span class="line">     &#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;style&gt;</span></span><br><span class="line"><span class="regexp">  .tag-cloud-tags&#123;</span></span><br><span class="line"><span class="regexp">    /</span>*font-family: Helvetica, Tahoma, Arial;*<span class="regexp">/</span></span><br><span class="line"><span class="regexp">    /</span>*font-weight: <span class="number">100</span>;*<span class="regexp">/</span></span><br><span class="line"><span class="regexp">    text-align: center;</span></span><br><span class="line"><span class="regexp">    counter-reset: tags;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">  .tag-cloud-tags a&#123;</span></span><br><span class="line"><span class="regexp">    border-radius: 6px;</span></span><br><span class="line"><span class="regexp">    padding-right: 5px;</span></span><br><span class="line"><span class="regexp">    padding-left: 5px;</span></span><br><span class="line"><span class="regexp">    margin: 8px 5px 0px 0px;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">  .tag-cloud-tags a:before&#123;</span></span><br><span class="line"><span class="regexp">    content: "🔖";</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  .tag-cloud-tags a:hover&#123;</span></span><br><span class="line"><span class="regexp">     box-shadow: 0px 5px 15px 0px rgba(0,0,0,.4);</span></span><br><span class="line"><span class="regexp">     transform: scale(1.1);</span></span><br><span class="line"><span class="regexp">     /</span>*box-shadow: <span class="number">10</span>px <span class="number">10</span>px <span class="number">15</span>px <span class="number">2</span>px rgba(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">.12</span>), <span class="number">0</span> <span class="number">0</span> <span class="number">6</span>px <span class="number">0</span> rgba(<span class="number">104</span>, <span class="number">104</span>, <span class="number">105</span>, <span class="number">0.1</span>);*<span class="regexp">/</span></span><br><span class="line"><span class="regexp">     transition-duration: 0.15s;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&lt;/</span>style&gt;</span><br></pre></td></tr></table></figure>

<p>在同级目录的 <code>page.swig</code> 中引入 <code>tag-color.swig</code></p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">&#123;% include 'tag-color.swig' %&#125;</span><br></pre></td></tr></table></figure>



<h5 id="4-2-归档页美化"><a href="#4-2-归档页美化" class="headerlink" title="4.2 归档页美化"></a>4.2 归档页美化</h5><p>​        修改 <code>themes/next/layout/_macro/post-collapse.swig</code> 后代码如下：</p>
<p>​        修改前：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&#123;% macro render(post) %&#125;</span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">"post post-type-&#123;&#123; post.type | default('normal') &#125;&#125;"</span> <span class="attr">itemscope</span> <span class="attr">itemtype</span>=<span class="string">"http://schema.org/Article"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">header</span> <span class="attr">class</span>=<span class="string">"post-header"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">&#123;%</span> <span class="attr">if</span> <span class="attr">theme.seo</span> %&#125;<span class="attr">h3</span>&#123;% <span class="attr">else</span> %&#125;<span class="attr">h2</span>&#123;% <span class="attr">endif</span> %&#125; <span class="attr">class</span>=<span class="string">"post-title"</span>&gt;</span></span><br><span class="line">        &#123;% if post.link %&#125;&#123;# Link posts #&#125;</span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"post-title-link post-title-link-external"</span> <span class="attr">target</span>=<span class="string">"_blank"</span> <span class="attr">href</span>=<span class="string">"&#123;&#123; url_for(post.link) &#125;&#125;"</span> <span class="attr">itemprop</span>=<span class="string">"url"</span>&gt;</span></span><br><span class="line">            &#123;&#123; post.title or post.link &#125;&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-external-link"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        &#123;% else %&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"post-title-link"</span> <span class="attr">href</span>=<span class="string">"&#123;&#123; url_for(post.path) &#125;&#125;"</span> <span class="attr">itemprop</span>=<span class="string">"url"</span>&gt;</span></span><br><span class="line">              &#123;% if post.type === 'picture' %&#125;</span><br><span class="line">                &#123;&#123; post.content &#125;&#125;</span><br><span class="line">              &#123;% else %&#125;</span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">itemprop</span>=<span class="string">"name"</span>&gt;</span>&#123;&#123; post.title | default(__('post.untitled')) &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">              &#123;% endif %&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        &#123;% endif %&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">&#123;%</span> <span class="attr">if</span> <span class="attr">theme.seo</span> %&#125;<span class="attr">h3</span>&#123;% <span class="attr">else</span> %&#125;<span class="attr">h2</span>&#123;% <span class="attr">endif</span> %&#125;&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"post-meta"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">time</span> <span class="attr">class</span>=<span class="string">"post-time"</span> <span class="attr">itemprop</span>=<span class="string">"dateCreated"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">datetime</span>=<span class="string">"&#123;&#123; moment(post.date).format() &#125;&#125;"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">content</span>=<span class="string">"&#123;&#123; date(post.date, config.date_format) &#125;&#125;"</span> &gt;</span></span><br><span class="line">          &#123;&#123; date(post.date, 'MM-DD') &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">time</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&#123;% endmacro %&#125;</span><br></pre></td></tr></table></figure>

<p>​        修改后：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&#123;% macro render(post) %&#125;</span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">"my-post post-type-&#123;&#123; post.type | default('normal') &#125;&#125;"</span> <span class="attr">itemscope</span> <span class="attr">itemtype</span>=<span class="string">"http://schema.org/Article"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">header</span> <span class="attr">class</span>=<span class="string">"my-post-header"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"my-post-meta"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">time</span> <span class="attr">class</span>=<span class="string">"my-post-time"</span> <span class="attr">itemprop</span>=<span class="string">"dateCreated"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">datetime</span>=<span class="string">"&#123;&#123; moment(post.date).format() &#125;&#125;"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">content</span>=<span class="string">"&#123;&#123; date(post.date, config.date_format) &#125;&#125;"</span> &gt;</span></span><br><span class="line">          &#123;&#123; date(post.date, 'MM-DD') &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">time</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">&#123;%</span> <span class="attr">if</span> <span class="attr">theme.seo</span> %&#125;<span class="attr">h3</span>&#123;% <span class="attr">else</span> %&#125;<span class="attr">h2</span>&#123;% <span class="attr">endif</span> %&#125; <span class="attr">class</span>=<span class="string">"my-post-title"</span>&gt;</span></span><br><span class="line">        &#123;% if post.link %&#125;&#123;# Link posts #&#125;</span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"my-post-title-link post-title-link-external"</span> <span class="attr">target</span>=<span class="string">"_blank"</span> <span class="attr">href</span>=<span class="string">"&#123;&#123; url_for(post.link) &#125;&#125;"</span> <span class="attr">itemprop</span>=<span class="string">"url"</span>&gt;</span></span><br><span class="line">            &#123;&#123; post.title or post.link &#125;&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-external-link"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        &#123;% else %&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"my-post-title-link"</span> <span class="attr">href</span>=<span class="string">"&#123;&#123; url_for(post.path) &#125;&#125;"</span> <span class="attr">itemprop</span>=<span class="string">"url"</span>&gt;</span></span><br><span class="line">              &#123;% if post.type === 'picture' %&#125;</span><br><span class="line">                &#123;&#123; post.content &#125;&#125;</span><br><span class="line">              &#123;% else %&#125;</span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">itemprop</span>=<span class="string">"name"</span>&gt;</span>&#123;&#123; post.title | default(__('post.untitled')) &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">              &#123;% endif %&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        &#123;% endif %&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">&#123;%</span> <span class="attr">if</span> <span class="attr">theme.seo</span> %&#125;<span class="attr">h3</span>&#123;% <span class="attr">else</span> %&#125;<span class="attr">h2</span>&#123;% <span class="attr">endif</span> %&#125;&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&#123;% endmacro %&#125;</span><br></pre></td></tr></table></figure>

<p>​        主要修改：</p>
<ul>
<li>将 <code>post-meta</code> 这个 <code>div</code> 移到前面 <code>header</code> 标签下；</li>
<li>将所有 <code>class</code> 属性加上 <code>my-</code>，如 <code>my-post-meta</code>，这样改动不影响其它页面引用的样式；</li>
</ul>
<p>​        在 <code>/themes/next/source/css/_custom/custom.styl</code> 新增如下样式：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 归档页样式 began */</span></span><br><span class="line"><span class="selector-class">.page-archive</span> <span class="selector-class">.archive-page-counter</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#49b1f5</span>;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">padding-right</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  +mobile() &#123;</span><br><span class="line">    <span class="selector-tag">font-size</span>: 16<span class="selector-tag">px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.my-post-time</span>&#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">11px</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#49b1f5</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">padding-right</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.mypost</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">1rem</span>;</span><br><span class="line">  <span class="attribute">-webkit-transition</span>: all .<span class="number">2s</span> ease-in-out;</span><br><span class="line">  <span class="attribute">-moz-transition</span>: all .<span class="number">2s</span> ease-in-out;</span><br><span class="line">  <span class="attribute">-o-transition</span>: all .<span class="number">2s</span> ease-in-out;</span><br><span class="line">  <span class="attribute">-ms-transition</span>: all .<span class="number">2s</span> ease-in-out;</span><br><span class="line">  <span class="attribute">transition</span>: all .<span class="number">2s</span> ease-in-out;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-class">.my-post-title-link</span><span class="selector-pseudo">:before</span>&#123;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">"📚"</span>;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">font</span>: normal normal normal <span class="number">14px</span>/<span class="number">1</span> FontAwesome;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">18px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.my-post</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>);</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">10px</span> <span class="number">10px</span> <span class="number">15px</span> <span class="number">2px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">12</span>), <span class="number">0</span> <span class="number">0</span> <span class="number">6px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">104</span>, <span class="number">104</span>, <span class="number">105</span>, <span class="number">0.1</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">1px</span> <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">25px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">transition-duration</span>: <span class="number">0.15s</span>;</span><br><span class="line">  +mobile()&#123;</span><br><span class="line">    <span class="selector-tag">width</span>: 260<span class="selector-tag">px</span>;</span><br><span class="line">    <span class="selector-tag">margin-left</span>: 18<span class="selector-tag">px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  //display:flex;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-class">.my-post-title-link</span>&#123;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">400</span>;</span><br><span class="line">  +mobile() &#123;</span><br><span class="line">    <span class="selector-tag">font-size</span>: 14<span class="selector-tag">px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.my-post-title</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">4.5rem</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#4c4948</span>;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">  <span class="attribute">font-size</span>: .<span class="number">8rem</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  +mobile() &#123;</span><br><span class="line">    //margin-left: 4rem;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.my-post-header</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>: top;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">1rem</span>;</span><br><span class="line">  <span class="attribute">-webkit-transition</span>: all .<span class="number">2s</span> ease-in-out;</span><br><span class="line">  <span class="attribute">-moz-transition</span>: all .<span class="number">2s</span> ease-in-out;</span><br><span class="line">  <span class="attribute">-o-transition</span>: all .<span class="number">2s</span> ease-in-out;</span><br><span class="line">  <span class="attribute">-ms-transition</span>: all .<span class="number">2s</span> ease-in-out;</span><br><span class="line">  <span class="attribute">transition</span>: all .<span class="number">2s</span> ease-in-out;</span><br><span class="line">&#125;</span><br><span class="line">//.my-post-title-link&#123;</span><br><span class="line">//  font-size: 16px;</span><br><span class="line">//  font-weight: 500;</span><br><span class="line">//&#125;</span><br><span class="line"><span class="selector-class">.my-post-meta</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#99a9bf</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">80px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#114142</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-class">.post-block</span><span class="selector-class">.tag</span> <span class="selector-class">.collection-title</span> <span class="selector-tag">h2</span> &#123;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">1px</span>;</span><br><span class="line">  <span class="attribute">border-style</span>: solid;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="number">#3f3f3f</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">22px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#b4e8fa</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">2px</span> <span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">letter-spacing</span>: <span class="number">1.5px</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#3f3f3f</span>;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  +mobile()&#123;</span><br><span class="line">    <span class="selector-tag">font-size</span>: 18<span class="selector-tag">px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.category-list-link</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>);</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">10px</span> <span class="number">10px</span> <span class="number">15px</span> <span class="number">2px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">12</span>), <span class="number">0</span> <span class="number">0</span> <span class="number">6px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">104</span>, <span class="number">104</span>, <span class="number">105</span>, <span class="number">0.1</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">1px</span> <span class="number">1px</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">transition-duration</span>: <span class="number">0.15s</span>;</span><br><span class="line">  //display:flex;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 归档页样式 end */</span></span><br></pre></td></tr></table></figure>

<p>​        可根据需求调整样式表。</p>
<h5 id="4-3-文章首字下沉"><a href="#4-3-文章首字下沉" class="headerlink" title="4.3 文章首字下沉"></a>4.3 文章首字下沉</h5><p>​        在 <code>/themes/next/source/css/_custom/custom/styl</code> 中添加如下样式：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.post-body</span>&gt;<span class="selector-tag">p</span><span class="selector-pseudo">:first-child</span><span class="selector-pseudo">::first-letter</span>&#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line"><span class="comment">/* height: 32px;*/</span></span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">14px</span>;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">6px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#555</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">42px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">28px</span>;</span><br><span class="line">  <span class="attribute">font-style</span>: normal;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">400</span>;</span><br><span class="line">  +mobile()&#123;</span><br><span class="line">    <span class="selector-tag">margin-top</span>: 10<span class="selector-tag">px</span>;</span><br><span class="line">    <span class="selector-tag">margin-right</span>: 4<span class="selector-tag">px</span>;</span><br><span class="line">    <span class="selector-tag">font-size</span>: 26<span class="selector-tag">px</span>;</span><br><span class="line">    <span class="selector-tag">line-height</span>: 20<span class="selector-tag">px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>修改 <code>div</code> 标签下第一个 <code>p</code> 标签的样式。</p>
<h5 id="4-4-canvas粒子时钟"><a href="#4-4-canvas粒子时钟" class="headerlink" title="4.4 canvas粒子时钟"></a>4.4 canvas粒子时钟</h5><p>​        在 <code>/themes/next/layout/_custom/</code> 目录下，新建 <code>clock.swig</code> 文件。</p>
<p>​        在 ``/themes/next/layout/_macro/sidebar.swig` 中引入：</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">&lt;section&gt;</span><br><span class="line">    &lt;div style="display:flex;margin-top:2px;margin-bottom:2px"&gt;</span><br><span class="line">    	&#123;% include '../_custom/clock.swig' %&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/section&gt;</span><br></pre></td></tr></table></figure>



<h5 id="4-5-网站运行时间"><a href="#4-5-网站运行时间" class="headerlink" title="4.5 网站运行时间"></a>4.5 网站运行时间</h5><p>​        在 <code>/themes/next/layout/_custom/</code> 目录下，新建 <code>runtime.swig</code> 文件，内容如下：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"days"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">language</span>=<span class="string">"javascript"</span>&gt;</span></span><br><span class="line"><span class="actionscript"><span class="function"><span class="keyword">function</span> <span class="title">show_date_time</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="javascript"><span class="built_in">window</span>.setTimeout(<span class="string">"show_date_time()"</span>, <span class="number">1000</span>);</span></span><br><span class="line"><span class="javascript">BirthDay=<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">"08/07/2019 20:00:00"</span>);</span></span><br><span class="line"><span class="javascript">today=<span class="keyword">new</span> <span class="built_in">Date</span>();</span></span><br><span class="line">timeold=(today.getTime()-BirthDay.getTime());</span><br><span class="line">sectimeold=timeold/1000</span><br><span class="line"><span class="javascript">secondsold=<span class="built_in">Math</span>.floor(sectimeold);</span></span><br><span class="line">msPerDay=24*60*60*1000</span><br><span class="line">e_daysold=timeold/msPerDay</span><br><span class="line"><span class="javascript">daysold=<span class="built_in">Math</span>.floor(e_daysold);</span></span><br><span class="line">e_hrsold=(e_daysold-daysold)*24;</span><br><span class="line"><span class="javascript">hrsold=setzero(<span class="built_in">Math</span>.floor(e_hrsold));</span></span><br><span class="line">e_minsold=(e_hrsold-hrsold)*60;</span><br><span class="line"><span class="javascript">minsold=setzero(<span class="built_in">Math</span>.floor((e_hrsold-hrsold)*<span class="number">60</span>));</span></span><br><span class="line"><span class="javascript">seconds=setzero(<span class="built_in">Math</span>.floor((e_minsold-minsold)*<span class="number">60</span>));</span></span><br><span class="line"><span class="javascript"><span class="built_in">document</span>.getElementById(<span class="string">'days'</span>).innerHTML=<span class="string">"已运行"</span>+daysold+<span class="string">"天"</span>+hrsold+<span class="string">"时"</span>+minsold+<span class="string">"分"</span>+seconds+<span class="string">"秒"</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="actionscript"><span class="function"><span class="keyword">function</span> <span class="title">setzero</span><span class="params">(i)</span></span>&#123;</span></span><br><span class="line">if (i&lt;10)</span><br><span class="line"><span class="actionscript">&#123;i=<span class="string">"0"</span> + i&#125;;</span></span><br><span class="line"><span class="actionscript"><span class="keyword">return</span> i;</span></span><br><span class="line">&#125;</span><br><span class="line">show_date_time();</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>​        修改 BirthDay 为建站起始时间。</p>
<p>​        在 ``/themes/next/layout/_macro/sidebar.swig` 中引入：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"display:flex;margin-top:2px;margin-bottom:2px"</span>&gt;</span></span><br><span class="line">        &#123;% include '../_custom/runtime.swig' %&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="4-6-网站动态背景图片"><a href="#4-6-网站动态背景图片" class="headerlink" title="4.6 网站动态背景图片"></a>4.6 网站动态背景图片</h5><p>​        在 <code>/themes/next/source/css/_custom/custom.styl</code> 中设置 <code>body</code> 属性：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>:<span class="built_in">url</span>(https://source.unsplash.com/random/<span class="number">1600</span>x900);</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  <span class="attribute">background-attachment</span>:fixed;</span><br><span class="line">  <span class="attribute">background-position</span>:<span class="number">50%</span> <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        其中 url 可根据 <a href="https://unsplash.com/developers" target="_blank" rel="noopener">Unsplash Source</a>网站来生成。</p>
<p>​        修改 <code>custom.styl</code> 背景透明度：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">// 设置页面透明度</span><br><span class="line"><span class="selector-class">.content-wrap</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.9</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.sidebar</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.9</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.header-inner</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,<span class="number">0.9</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.popup</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.9</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​        其它背景效果可在主题 <code>_config.yml</code> 中 <code>canvas</code> 系列进行设置。</p>
<h5 id="4-7-主页轮播图"><a href="#4-7-主页轮播图" class="headerlink" title="4.7 主页轮播图"></a>4.7 主页轮播图</h5><p>在 <code>/themes/next/layout/_macro/</code> 目录下，新建 <code>carousel.swig</code> 文件：</p>
<p>在 <code>/themes/next/layout/index.swig</code> 中，找到：</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">&#123;% block content %&#125;</span><br></pre></td></tr></table></figure>

<p>在其下方引入新建的 <code>carousel.swig</code>  文件：</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">&lt;!-- 轮播图 --&gt;</span><br><span class="line">&#123;% include '_macro/carousel.swig' %&#125;</span><br></pre></td></tr></table></figure>

<p>在主题配置文件某尾添加：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#Home carousel map, from means link, img means picture</span></span><br><span class="line"><span class="attr">carousel:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">item:</span> <span class="string">[</span></span><br><span class="line">    <span class="string">&#123;</span></span><br><span class="line">      <span class="attr">'link':</span> <span class="string">'文章链接地址'</span><span class="string">,</span></span><br><span class="line">      <span class="attr">'img':</span> <span class="string">'图片链接地址'</span></span><br><span class="line">    <span class="string">&#125;,</span></span><br><span class="line">    <span class="string">&#123;</span></span><br><span class="line">      <span class="attr">'link':</span> <span class="string">'文章链接地址'</span><span class="string">,</span></span><br><span class="line">      <span class="attr">'img':</span> <span class="string">'图片链接地址'</span></span><br><span class="line">    <span class="string">&#125;</span></span><br><span class="line">  <span class="string">]</span></span><br></pre></td></tr></table></figure>



<h5 id="4-8-调整页面宽度"><a href="#4-8-调整页面宽度" class="headerlink" title="4.8 调整页面宽度"></a>4.8 调整页面宽度</h5><p> 修改文件<code>source/css/_variables/Pisces.styl</code>，调整如下 ：</p>
]]></content>
      <categories>
        <category>Web前端</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>next主题</tag>
      </tags>
  </entry>
</search>
